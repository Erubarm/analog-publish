Введение: От LAN к WAN 

1.1. Что такое Глобальная Сеть (WAN)?

На предыдущих лекциях мы много говорили о локальных сетях (LAN) и проблемах, таких как управление трафиком (VLAN) и отказоустойчивость (STP). Однако LAN охватывает небольшую территорию, например, одно здание.

**Глобальная сеть (WAN)** охватывает значительные географические площади - целую страну, континент или даже несколько континентов. WAN объединяют локальные сети между собой.

**Архитектура WAN:** В отличие от LAN, где компьютеры соединены напрямую или через коммутаторы, WAN состоит из двух основных частей:

1. **Хосты (Hosts):** Компьютеры пользователей (или локальные сети), которые запускают прикладные программы.

2. **Подсеть связи (Communication Subnet, или просто подсеть):** Вся остальная часть сети, которая занимается передачей сообщений между хостами. Она состоит из маршрутизаторов (routers) и линий передачи (transmission lines).

Таким образом, для программиста WAN - это набор линий связи и маршрутизаторов, которые перемещают пакеты между удаленными LAN.

1.2. Вызовы WAN и необходимость в проводных технологиях

Для создания WAN на значительных расстояниях прокладка собственных кабелей, особенно в общественных местах, является либо неоправданно дорогой, либо запрещена законом. Следовательно, разработчикам сетей приходится использовать уже существующее оборудование связи, такое как телефонные или кабельные сети.

Часть 1: Инфраструктура магистральных сетей

Чтобы пакеты преодолели тысячи километров, они должны пройти через высокоскоростные сети, которые часто принадлежат крупным операторам связи.

2.1. Структура сети оператора связи

Типичная глобальная компьютерная сеть оператора связи имеет иерархическую структуру:

1. **Сети доступа (Access Networks):** Предоставляют доступ индивидуальным и корпоративным абонентам от их помещений до первого узла оператора связи (об этом поговорим в Части 2).

2. **Сети агрегирования (Aggregation Networks):** Собирают данные от многочисленных сетей доступа и передают их дальше.

3. **Магистральная сеть (Backbone Network):** Самая скоростная часть, объединяющая крупные центры данных. Она отвечает за перемещение трафика между конечными точками.

2.2. Роль первичных сетей (Primary Networks)

Магистрали WAN строятся на основе технологий, которые обеспечивают колоссальную пропускную способность, в основном используя **оптоволокно**. Эти базовые сети, называемые **первичными сетями**, функционируют не так, как обычные пакетные сети.

• **Особенности:** Первичные сети (например, SDH, OTN, DWDM) основаны на технике **коммутации каналов**.

• **Коммутация каналов:** В отличие от коммутации пакетов (когда канал используется совместно и данные могут задерживаться), коммутация каналов требует предварительного установления **составного канала** (выделенного пути) с фиксированной пропускной способностью на все время сеанса.

• **Цель:** Создание постоянных, высококачественных, физических двухточечных цифровых каналов ("виртуальных кабелей") для других, наложенных сетей (таких как IP-сети).

**Ключевые технологии первичных сетей (Уровень 1/2):**

1. **SDH/SONET (Синхронная Цифровая Иерархия):** Поколение технологий, позволяющее создавать высокоскоростные магистральные каналы, например, до 10 Гбит/с. Кадры SDH/SONET могут переносить данные других потоков (PDH) с сохранением их синхронности, что важно для голоса.

2. **DWDM (Dense Wave Division Multiplexing):** Революционная технология, которая использует одновременно модулированные сигналы нескольких длин волн (цветов) в одном оптическом волокне. Это позволяет увеличить пропускную способность волокна в десятки раз - до сотен гигабит и даже терабитов в секунду (сегодня до 30 Тбит/с).

3. **OTN (Optical Transport Network):** Относительно новая технология, которая позволяет передавать по волновым каналам DWDM сигналы любых других технологий (SDH, Gigabit Ethernet, 100G Ethernet и др.), обеспечивая "цифровую оболочку" и прозрачность для пользовательских данных.

2.3. WAN и IP: Наложенные сети

Первичные сети предоставляют чистые транспортные услуги. Сами же IP-сети (Интернет) являются **наложенными сетями**. Протокол IP доминирует в WAN, поскольку он может работать поверх любых технологий - Ethernet, MPLS, ATM, Frame Relay - объединяя их в единую составную сеть.

Часть 2: Проводные технологии доступа ("Последняя миля")

Сети доступа сталкиваются с проблемой: как предоставить высокую скорость, используя либо старую медную инфраструктуру, либо дорогую новую оптоволоконную.

3.1. Доступ по телефонным линиям (xDSL/ADSL)

Исторически для доступа в WAN использовались обычные аналоговые телефонные линии (PSTN) через модемы (до 56 Кбит/с).

• **Технология:** xDSL (Digital Subscriber Line), наиболее распространенная версия - **ADSL (Asymmetric DSL)**.

• **Среда:** Использует существующие абонентские шлейфы - витые пары категории 3.

• **Принцип работы:** Чтобы обойти низкую пропускную способность и при этом не мешать голосовой связи (POTS), инженеры разделили полосу пропускания абонентского шлейфа (около 1.1 МГц) на множество независимых каналов (256 каналов по 4312.5 Гц).

• **Механизм:** Используется схема OFDM/DMT (дискретная многотональная модуляция) для пересылки данных по этим каналам. ADSL не использует каналы 0–5, чтобы отделить информационные сигналы от голосовых.

• **Асимметрия:** ADSL является асимметричной, поскольку большинство ранних приложений (например, веб-браузеры) требовало гораздо большей скорости входящего трафика, чем исходящего.

3.2. Доступ по кабельным сетям (DOCSIS)

Сети кабельного телевидения (CATV) также стали использоваться для широкополосного доступа в интернет.

• **Среда:** Используют архитектуру HFC (Hybrid Fiber-Coaxial), где оптоволокно доходит до районного узла, а дальше до домов идет коаксиальный кабель.

• **Технология:** **DOCSIS (Data Over Cable Service Interface Specification)** - стандарт передачи данных по коаксиальному кабелю.

• **Функции:** DOCSIS работает на физическом и канальном уровнях. Он отвечает за формирование фреймов, исправление ошибок (включая CRC) и, что критично, за распределение пропускной способности между множеством пользователей, подключенных к одному кабельному сегменту.

• **Компоненты:** Соединение устанавливается между кабельным модемом (CM) у абонента и головной станцией (CMTS) оператора.

3.3. Доступ по оптоволокну (FTTH/PON)

Оптоволокно является проводной средой с наилучшими характеристиками (очень широкая полоса пропускания, низкое затухание, нечувствительность к электромагнитным помехам).

• **Концепция:** FTTH (Fiber to the Home, оптоволокно в дом).

• **Технология:** **Пассивная Оптическая Сеть (PON)**. Название "пассивная" означает, что оптические разветвители (сплиттеры/сумматоры), используемые для подключения множества домов к одному волокну, не требуют электропитания.

• **Механизм:** PON использует несколько длин волн: одна для входящей передачи данных (всем домам), другая - для исходящей.

• **Скорость и стандарты:** Обе разновидности (GPON от ITU-T, совместимый с SDH, и EPON от IEEE, совместимый с Ethernet) обеспечивают высокую скорость - до 10 Гбит/с.

• **Пропускная способность:** В PON колоссальная пропускная способность оптоволокна разделяется между всеми домами, подключенными к ветке.

Часть 3: Корпоративные Глобальные Решения

Корпоративные WAN, соединяющие филиалы, используют как выделенную, так и общедоступную инфраструктуру.

4.1. Выделенные (арендованные) каналы

Традиционный метод - аренда выделенных каналов у оператора связи.

• **Технология:** Обычно это каналы, предоставляемые первичными сетями (SDH, OTN).

• **Преимущества:** Гарантированная пропускная способность, высокая надежность, минимальные задержки (свойства, присущие коммутации каналов).

• **Недостатки:** Высокая стоимость и отсутствие гибкости (ресурсы закреплены постоянно).

4.2. Виртуальные Частные Сети (VPN)

Чтобы снизить расходы, организации используют публичный Интернет для связи филиалов, создавая **Виртуальные Частные Сети (VPN)**.

• **Принцип:** Офисы соединяются посредством **виртуальных каналов (туннелей)**, используя базовые возможности Интернета.

• **Инкапсуляция (Туннелирование):** Пакеты "протокола-пассажира" (трафик корпоративной сети) помещаются внутрь пакетов "несущего протокола" (трафик публичного Интернета).

• **Плюсы/Минусы:** VPN обеспечивает гибкое переиспользование интернет-соединений (виртуализация), но производительность зависит от быстродействия базового интернет-соединения, и контроля над ресурсами нет.

• **Современные реализации:** VPN часто строятся на основе технологий канального уровня (Ethernet VPN) или сетевого уровня (MPLS VPN, IPSec).

4.3. MPLS (MultiProtocol Label Switching)

MPLS - это ключевая транспортная технология для современных глобальных IP-сетей, она объединяет дейтаграммную передачу IP с техникой виртуальных каналов.

• **Назначение:** MPLS позволяет обеспечить более высокую степень контроля над маршрутами (инжиниринг трафика) и быстрое восстановление соединений, что делает ее идеальной для оказания услуг VPN и повышения качества обслуживания (QoS) в IP-сетях.

• **Механизм:** Вместо продвижения пакета, основанного на анализе IP-адреса назначения, MPLS продвигает пакеты на основе короткой **метки (Label)**, закрепленной за виртуальным каналом.

4.4. Программно-Определяемые WAN (SD-WAN)

В последние годы для управления корпоративными WAN используется концепция **Программно-Определяемых Сетей (SDN)**.

• **Определение:** SD-WAN (Software-Defined WAN) - это архитектура, в которой логика управления сетью (control plane) отделена от плоскости данных (data plane) и централизованно реализуется в виде внешнего программного контроллера.

• **Функциональность:** SD-WAN позволяет организации использовать комбинацию дорогих выделенных линий и более дешевых интернет-соединений, при этом логика, заключенная в ПО, перепрограммирует коммутирующие элементы в реальном времени для оптимизации стоимости и быстродействия сети, а также для обеспечения единого соглашения о качестве предоставления услуги (SLA).

Заключение

Проводные WAN-технологии сильно эволюционировали: от модемов по телефонным линиям до мультитерабитных оптоволоконных магистралей, управляемых сложными протоколами, такими как DWDM, OTN и MPLS. Важно понимать, что магистрали (первичные сети) часто используют принципы коммутации каналов для надежности, в то время как доступ к ним (сети доступа) и корпоративные решения (VPN, SD-WAN) строятся на более гибкой и экономичной коммутации пакетов.
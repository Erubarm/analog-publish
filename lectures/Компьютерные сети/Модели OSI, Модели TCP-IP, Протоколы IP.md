
==Тест==: [[Модели OSI, Модели TCP-IP, Протоколы IP (тест)]]

**1. Введение в многоуровневые архитектуры протоколов**

Компьютерные сети основаны на протоколах — правилах взаимодействия процессов. Для управления сложностью сетевых взаимодействий используются многоуровневые архитектуры протоколов, где каждый уровень предоставляет услуги вышележащему уровню, скрывая детали протоколов нижележащих уровней. Это одна из ключевых абстракций в сетевой архитектуре. Две основные эталонные модели, лежащие в основе стека протоколов, — это OSI и TCP/IP.

**2. Эталонная модель OSI (Open Systems Interconnection)**

Эталонная модель OSI была разработана для описания сетевых архитектур и является исключительно удобной для понимания сетей. Она имеет семиуровневую структуру, где каждый уровень выполняет определенные функции:

• **7. Прикладной уровень (Application Layer)**: Включает все высокоуровневые протоколы, такие как протоколы передачи файлов, электронной почты, HTTP.

• **6. Представительский уровень (Presentation Layer)**: Отвечает за представление данных, например, за шифрование и дешифрование, форматирование данных.

• **5. Сеансовый уровень (Session Layer)**: Управляет взаимодействием сторон, фиксирует активную сторону, предоставляет средства синхронизации сеанса.

• **4. Транспортный уровень (Transport Layer)**: Обеспечивает сквозную связь между процессами на разных хостах. Например, TCP и UDP.

• **3. Сетевой уровень (Network Layer)**: Отвечает за маршрутизацию пакетов по сети, создание единой транспортной системы, объединяющей несколько сетей (интернет). Основной протокол — IP.

• **2. Канальный уровень (Data Link Layer)**: Описывает, как данные передаются по физическим каналам связи, управляет доступом к среде, формирует фреймы. Примеры: Ethernet, 802.11.

• **1. Физический уровень (Physical Layer)**: Определяет физические характеристики среды передачи (кабели, оптоволокно), кодирование сигналов.

**Критика модели OSI:**

• **Неподходящий момент времени:** Появилась позже, чем TCP/IP, когда последний уже активно внедрялся.

• **Плохая архитектура:** Некоторые уровни, например, сеансовый и представительский, оказались бесполезны для большинства приложений.

• **Неудачная реализация и политика:** Ранние протоколы OSI были сложными, а их реализации зачастую неудачными и платными, что не способствовало их распространению.

В настоящее время модель OSI редко используется в полном объеме, но ее концептуальная структура по-прежнему важна для понимания сетевых архитектур.

**3. Эталонная модель TCP/IP**

Эталонная модель TCP/IP использовалась в ARPANET, прародителе интернета, и была разработана Министерством обороны США для обеспечения бесперебойного соединения множества разнородных сетей. Она получила свое название по двум основным протоколам — TCP и IP. Стек TCP/IP имеет иерархическую четырех- или пятиуровневую структуру:

• **Прикладной уровень (Application Layer)**: Соответствует трем верхним уровням модели OSI (прикладному, представительскому, сеансовому). Включает протоколы высокого уровня, используемые приложениями. Примеры: HTTP, FTP, SMTP, DNS, TELNET, RTP. Приложения просто включают все необходимые функции, связанные с сеансами или представлением.

• **Транспортный уровень (Transport Layer)**: Располагается непосредственно над межсетевым уровнем. Он обеспечивает связь объектов одного ранга, расположенных на разных хостах. Определены два основных сквозных транспортных протокола:

   ◦ **TCP (Transmission Control Protocol)**: Надежный, ориентированный на установление соединения протокол, обеспечивающий безошибочную доставку байтового потока с одного компьютера на любой другой. Он разбивает поток на сегменты, управляет их движением, чтобы предотвратить перегрузку получателя, и включает механизмы контроля перегрузки. Современные версии включают CUBIC TCP, QUIC, BBR.

   ◦ **UDP (User Datagram Protocol)**: Ненадежный протокол без соединений. Используется для приложений, которым не требуется TCP для разбиения на сообщения и управления потоками, или для которых важнее быстрота доставки, чем ее точность (например, голосовая или видеосвязь, DNS-запросы).

• **Межсетевой уровень (Internet Layer, Network Layer)**: Является стержнем всей архитектуры TCP/IP. Определяет официальный формат пакетов (IP) и вспомогательные протоколы (ICMP). Его задача — доставка IP-пакетов по месту назначения, маршрутизация пакетов и контроль перегруженности сети. Основной протокол — IP. Протоколы маршрутизации (RIP, OSPF) также относятся к этому уровню, так как они используются для изучения топологии сети и составления таблиц маршрутизации.

• **Канальный уровень (Link Layer)**: Описывает, какими должны быть каналы связи (например, Ethernet, 802.11, SONET, DSL) для удовлетворения потребностей межсетевого уровня без соединений. В первых описаниях модели TCP/IP он игнорировался и рассматривался как интерфейс между хостами и линиями передачи.

• **Физический уровень (Physical Layer)**: В некоторых представлениях модели TCP/IP (например, в гибридной модели книги), этот уровень выделяется отдельно, так же как в OSI. Он обеспечивает передачу битов по физической среде.

**Критика модели TCP/IP:**

• Изначально отсутствовало четкое разграничение служб, интерфейсов и протоколов.

• Некоторые ранние протоколы (например, TELNET) выглядят устаревшими, но все еще используются из-за повсеместного внедрения.

**4. Протоколы IP**

Протокол IP (Internet Protocol) — основа всего интернета. Он был разработан для межсетевого обмена и предоставляет уровень обслуживания "best effort" (без гарантий) при передаче пакетов от отправителя к получателю.

**4.1. IP-адресация**

• **IPv4**: Использует 32-битные адреса. Каждый хост и маршрутизатор имеет IP-адрес, который относится к сетевому интерфейсу. IP-адреса иерархичны: первая часть определяет сеть, вторая — хост. Адреса записываются в виде четырех десятичных чисел, разделенных точками (например, 128.208.2.151).

   ◦ **Классы IP-адресов**: Исторически IP-адреса делились на классы A, B, C, D, E по значениям первых битов.

   ◦ **Префиксы и CIDR (Classless Inter-Domain Routing)**: Современный подход, где префикс задается IP-адресом и длиной сетевой части в битах (например, 128.208.2.0/24). CIDR позволяет экономно расходовать адреса и эффективнее осуществлять маршрутизацию, объединяя несколько меньших сетей в одну более крупную (супернетинг).

   ◦ **Частные (немаршрутизируемые) адреса**: Диапазоны адресов (например, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16), используемые во внутренних сетях.

   ◦ **NAT (Network Address Translation)**: Метод трансляции частных IP-адресов во внешние публичные адреса, позволяющий экономить публичные IPv4-адреса.

   ◦ **Loopback-адрес**: Адрес 127.0.0.0/8 (обычно 127.0.0.1) используется для тестирования программ на локальном компьютере, данные не передаются в сеть.

• **IPv6**: Решает проблему дефицита IPv4-адресов, используя 128-битные адреса. Предлагает новые функции, включая средства безопасности и расширенные заголовки. Переход на IPv6 происходит медленно, часто используются механизмы сосуществования, такие как двойной стек и туннелирование.

**4.2. Фрагментация IP-пакетов**

• Протокол IP способен выполнять динамическую фрагментацию пакетов при передаче между сетями с различными значениями MTU (Maximum Transmission Unit).

• **MTU**: Максимально допустимая длина поля данных кадров.

• **Флаг DF (Do not Fragment)**: Запрещает маршрутизатору фрагментировать пакет. Если пакет не может пройти без фрагментации, он уничтожается.

• **Path MTU Discovery**: Метод для вычисления минимального MTU по всему пути, чтобы избежать фрагментации и снижения производительности.

• Фрагментация может происходить на маршрутизаторах, когда пакеты передаются из сети с большим MTU в сеть с меньшим MTU.

**4.3. Вспомогательные IP-протоколы**

• **ICMP (Internet Control Message Protocol)**: Протокол управляющих сообщений, используемый для диагностики и мониторинга сети. Передает сообщения об ошибках (например, недоступность адресата, истечение времени жизни пакета) и запросы-ответы (эхо-запрос/ответ, запрос/ответ отметки времени).

   ◦ **Ping**: Утилита, использующая ICMP-сообщения эхо-запроса и эхо-ответа для проверки достижимости узла и измерения RTT (времени прохождения сигнала туда и обратно).

   ◦ **Traceroute (tracert в Windows)**: Утилита, использующая ICMP-сообщения об истечении времени жизни (TIME EXCEEDED) для определения маршрута до удаленного хоста и IP-адресов промежуточных маршрутизаторов.

• **ARP (Address Resolution Protocol)**: Протокол разрешения адресов, используемый для отображения IP-адресов на локальные (аппаратные) MAC-адреса в пределах одной сети.

   ◦ Работает через ARP-таблицы (ARP-кэш) на сетевых интерфейсах. При отсутствии записи посылается широковещательный ARP-запрос.

   ◦ **Proxy ARP**: Механизм, при котором маршрутизатор отвечает на ARP-запросы от имени хостов, находящихся за ним, чтобы они выглядели для локальной сети как непосредственно подключенные.

• **DHCP (Dynamic Host Configuration Protocol)**: Протокол динамической настройки хостов, используемый для автоматического присвоения IP-адресов и других конфигурационных параметров (маска сети, шлюз по умолчанию, DNS-сервер) сетевым интерфейсам. Поддерживает ручное, автоматическое статическое и динамическое назначение адресов
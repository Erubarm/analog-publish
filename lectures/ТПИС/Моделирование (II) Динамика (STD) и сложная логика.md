I. Введение: Переход от структуры к поведению 

На прошлой лекции мы подробно изучили модели, описывающие **структуру** нашей системы: как данные перемещаются (DFD), как процессы распределяются по ролям (Swimlane) и как данные взаимосвязаны (ERD).

Сегодня мы переходим к анализу **поведения (динамики)**. Система — это не просто набор данных и процессов; ее поведение зависит от текущего состояния и внешних событий. Если описание функциональных требований становится слишком сложным, многословным и запутанным, мы должны прибегнуть к визуальным моделям для прояснения логики.

1.1. Роль динамического моделирования

Визуальные модели, о которых мы сегодня поговорим, решают ключевые проблемы, которые невозможно выявить при простом чтении текста:

1. **Неполнота сложной логики:** В текстовых требованиях легко пропустить комбинацию условий, что вынуждает разработчика "додумывать" поведение системы.

2. **Неоднозначность переходов:** Описание сложных изменений состояний на естественном языке несет высокий риск упущения разрешенных или появления запрещенных изменений.

--------------------------------------------------------------------------------

II. Моделирование динамики и жизненного цикла (STD) 

Системы реального времени, приложения, управляющие процессами, а также бизнес-объекты (заказы, счета-фактуры) имеют **жизненные циклы** с несколькими возможными состояниями.

2.1. Диаграмма переходов состояний (State-Transition Diagram, STD)

STD (или Диаграмма машины состояний UML) позволяет получить **лаконичное, полное и недвусмысленное представление** о состояниях объекта или системы.

**Что моделирует STD:**

• Жизненный цикл объекта (например, "Заказ химиката", "Договор", "Заявка на отпуск").

• Состояния системы реального времени (например, "Тренажер-беговая дорожка" может быть в состоянии "Выключено", "Простой", "Бег" или "Пауза").

**Ключевые элементы нотации**:

1. **Состояния (прямоугольники):** Возможные состояния объекта или системы.

2. **Переходы (стрелки):** Разрешенные переходы между состояниями.

3. **События/Условия:** Текстовые пояснения над стрелками, указывающие на событие или условие, вызывающее переход.

4. **Конечные состояния:** Состояния, в которые объект может перейти, но из которых не выходит (например, "Выполнен" или "Отменен" для заказа).

**Ценность STD:** STD помогает разработчику понять ожидаемое поведение системы и способствует раннему тестированию, так как тестировщики могут вывести тесты, покрывающие все допустимые пути переходов. При этом STD не показывает детали обработки, выполняемой системой, а только возможные изменения состояний, возникающие в результате этих процессов.

2.2. Таблица состояний (State Table)

Таблица состояний — это матричная модель, дополняющая STD. Она показывает возможные состояния, переходы и условия в табличной форме.

**Ценность Таблицы состояний:**

• **Проверка полноты:** Таблица состояний полезна для проверки того, что все необходимые состояния и переходы состояний корректно и полно описаны в функциональных требованиях.

• **Обнаружение ошибок:** Часто помогает обнаружить ошибки, не замеченные при изучении диаграмм или текстовых требований.

--------------------------------------------------------------------------------

III. Моделирование сложной логики (Decision Models) 

Когда логика, управляющая системой, включает множество условий ("И", "ИЛИ", "НЕ"), ее текстовое описание становится сложным для сопровождения и проверки на полноту.

Для решения этой проблемы используются Таблицы и Деревья решений, которые идеально подходят для документирования логики, связанной с **Бизнес-правилами**.

3.1. Применение к Бизнес-правилам (Напоминание и классификация)

Бизнес-правила (БП) — это скелет, вокруг которого строится функциональность. Они должны быть четко задокументированы, предпочтительно на **атомарном уровне** (короткие, простые, не объединенные сложной логикой "или" в конструкции "если-то").

Сложное моделирование логики применяется, в частности, для двух типов БП:

• **Активаторы операций (Activators):** Правила, обусловливающие выполнение определенных действий при определенных условиях (например, "Если контейнер просрочен, система должна уведомить менеджера").

• **Вычисления (Computations):** Правила, описывающие, как определять значения на основе других данных (например, "Скидка клиента определяется количеством приобретаемых единиц товара").

3.2. Таблицы решений (Decision Tables)

Таблицы решений — это матричный способ представления логики, который позволяет убедиться, что **ни одна комбинация условий не была пропущена**.

**Ключевые принципы:**

• Таблица определяет уникальные функциональные требования, связанные с различными комбинациями результатов _true_ и _false_ для наборов условий.

• Такие таблицы компактны и просты для проверки, понимания и модификации.

**Предостережение:**

• При написании правил для диапазонов (например, для скидок) крайне важно следить, чтобы **границы не перекрывались** (например, использовать диапазоны 1–5 и 6–10, а не 5–10 и 10–20), иначе возникнет **неоднозначность**.

3.3. Деревья решений (Decision Trees)

Деревья решений — это **визуальное представление** логики. Они демонстрируют, как последовательные решения приводят к различным результатам.

**Ключевые принципы:**

• Узлы представляют условия или решения (например, "Опасен ли химикат?"), а ветви ведут к следующему условию или конечному результату.

• Как и таблицы, они помогают убедиться в полноте охвата всех возможных комбинаций условий.

--------------------------------------------------------------------------------

IV. Моделирование событий и реакций (Event-Response Tables) 

Для систем, которые сильно зависят от внешних факторов, таких как встроенные системы (например, дорожные развязки, автомобили, системы управления оборудованием), Варианты использования могут оказаться недостаточными.

4.1. Таблица событий и реакций (Event-Response Table)

Эта модель полезна для анализа поведения системы реального времени и ее функциональных требований.

**Что она включает****:**

1. **Событие:** Внешнее или зависящее от времени событие, которое может повлиять на систему (например, "Нажатие кнопки Старт", "Получение сигнала немедленной очистки", "Таймер достиг заданного времени").

2. **Состояние системы:** Состояние, в котором система находится в момент события.

3. **Реакция системы:** Действие или поведение, которое система выполняет в ответ на событие и текущее состояние.

**Ценность:**

• Помогает **определить рамки системы** (boundary) путем перечисления событий, пересекающих границу системы.

• Особенно эффективна для **систем реального времени**.

• Если таблица является полной, она может служить частью функциональных требований.

**Связь с дизайном:** Реакция системы в таблице должна быть описана на уровне **сути**, а не деталей реализации (например, не указывать, что это должна быть "кнопка" или "голосовая команда"), чтобы избежать ненужных ограничений дизайна.

--------------------------------------------------------------------------------

V. Заключение и дальнейшие шаги 

Сегодня мы рассмотрели, как моделирование динамики (STD) и сложной логики (Таблицы и Деревья решений) дополняет структурные модели, которые мы обсуждали ранее (DFD, ERD). Эти приемы критически важны для:

1. **Обеспечения полноты** требований к поведению системы.

2. **Снижения двусмысленности**, особенно в отношении бизнес-правил и условий.

Помните, что Бизнес-правила, особенно в сложных сценариях, должны быть сформулированы на атомарном уровне, чтобы упростить их повторное использование и изменение.